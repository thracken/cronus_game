// Generated by CoffeeScript 1.10.0
var Currency, StoryPage, StorySegment, TeamMember, crystals, first_launch, first_run, gold, segment1, segment1_pages, segment_links, skill_points, story001_0, story001_1, story001_2, story001_3, story001_4, story001_5, story001_6, story001_7, story001_8, xp, xp_tick;

StoryPage = (function() {
  function StoryPage(image, text) {
    this.image = image;
    this.text = text;
  }

  return StoryPage;

})();

segment1_pages = [story001_0 = new StoryPage('img/tube0.jpg', '<em>Wha... what? Where am i?</em>'), story001_1 = new StoryPage('img/tube1.jpg', '"Hey! Let\'s get you out of there."'), story001_2 = new StoryPage('img/tube2.jpg', '*Hnngh!*'), story001_3 = new StoryPage('img/tube3.jpg', 'And so on...'), story001_4 = new StoryPage('img/tube4.jpg', ''), story001_5 = new StoryPage('img/tube5.jpg', ''), story001_6 = new StoryPage('img/tube6.jpg', ''), story001_7 = new StoryPage('img/tube7.jpg', ''), story001_8 = new StoryPage('img/tube8.jpg', '')];

StorySegment = (function() {
  StorySegment.SegmentsCompleted = 0;

  function StorySegment(num1, name1, pages) {
    this.num = num1;
    this.name = name1;
    this.pages = pages;
    this.progress = 0;
    this.completed = false;
    this.unlock = function() {
      var segment_link;
      segment_link = "<div><p><a href='#' class='segment_link' onclick='segment_links(" + this.num + (")'> " + this.num + " - " + this.name + "</a></p></div>");
      return $('#story_tab').append(segment_link);
    };
    this.show = function() {
      var html;
      html = ("<div id='story-segment-" + this.num + "' class='story-segment modal fade'>") + "<div class='modal-dialog' role='document'>" + "<div class='modal-content'>" + "<div class='modal-header'>" + "<button id='story-close' type='button' class='close' data-dismiss='modal' aria-label='Close' title='Close'><span aria-hidden='true'>&times;</span></button>" + ("<h4 class='modal-title' id='myModalLabel'>" + this.num + " - " + this.name + "</h4>") + "</div>" + "<div class='modal-body'>" + "<span id='story-arrow-left' class='glyphicon glyphicon-chevron-left'></span>" + ("<img id='segment-" + this.num + "-image' class='story-image' src='" + this.pages[this.progress].image + "' class='row' />") + "<span id='story-arrow-right' class='glyphicon glyphicon-chevron-right'></span>" + "</div>" + "<div class='modal-footer'>" + "</div>" + "</div>" + "</div>" + "</div>";
      $('#wrapper').append(html);
      $('#story-segment-' + this.num).modal({
        "show": "true",
        backdrop: "static"
      });
      $('#story-arrow-left').click((function(_this) {
        return function() {
          _this.progress--;
          return $("segment-" + _this.num + "-image").attr('src', "" + _this.pages[_this.progress].image);
        };
      })(this));
      $('#story-arrow-right').click((function(_this) {
        return function() {
          _this.progress++;
          return $("segment-" + _this.num + "-image").attr('src', "" + _this.pages[_this.progress].image);
        };
      })(this));
      return $('#story-close').click((function(_this) {
        return function() {};
      })(this));
    };
  }

  return StorySegment;

})();

segment1 = new StorySegment(1, "Let's get out of here...", segment1_pages);

segment_links = function(num) {
  var name;
  name = "segment" + num;
  return setTimeout(name + ".show()", 0);
};

Currency = (function() {
  function Currency(name1, amount1) {
    this.name = name1;
    this.amount = amount1;
    this.spend = function(amount) {
      return this.amount -= amount;
    };
    this.gain = function(amount) {
      return this.amount += amount;
    };
  }

  return Currency;

})();

gold = new Currency("Gold", 0);

xp = new Currency("Experience", 0);

crystals = new Currency("Crystals", 0);

skill_points = new Currency("Skill Points", 0);

TeamMember = (function() {
  function TeamMember(name1, main_stat) {
    this.name = name1;
    this.str = 1;
    this.fort = 1;
    this.dex = 1;
    this.speed = 1;
    this.energy = 20;
    this.hp = function() {
      return this.fort * 10;
    };
    this.crit_dmg = function() {
      return 1 + ((this.dex + this.str) / 100);
    };
    this.base_dmg = function() {
      return this.str * 1.5;
    };
    this.armor = function() {
      return this.fort * 0.5;
    };
    this.crit_chance = function() {
      return this.dex / 100;
    };
    this.dodge = function() {
      return 1 + ((this.speed + this.dex) / 100);
    };
    this.lvl = function() {
      return 0;
    };
  }

  return TeamMember;

})();

first_launch = function() {
  return true;
};

first_run = function() {
  if (first_launch()) {
    segment1.unlock();
    return segment1.show();
  }
};

xp_tick = function() {
  xp.gain(1);
  return $('#xp_label').text(xp.amount + " xp");
};

$(document).ready(function() {
  first_run();
  return window.setInterval(function() {
    return xp_tick();
  }, 1000);
});
