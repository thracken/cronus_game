// Generated by CoffeeScript 1.10.0
var Currency, StorySegment, TeamMember, crystals, first_launch, first_run, gold, navigation, skill_points, xp, xp_tick;

StorySegment = (function() {
  var StoryPage;

  StoryPage = (function() {
    function StoryPage(name, image, animation) {
      this.name = name;
      this.image = image;
      this.animation = animation;
    }

    return StoryPage;

  })();

  StorySegment.SegmentsCompleted = 0;

  function StorySegment(num, name) {
    var progress;
    this.num = num;
    this.name = name;
    progress = 0;
    this.completed = false;
    this.unlock = function() {};
    this.show = function() {};
  }

  return StorySegment;

})();


/*
    @unlock = ->
      segment_link = "<div>"+
                        "<p><a href='#' class='segment_link' onclick='segment_links(" + @num + ")'>" + @num + " - " + @name + "</a></p>"+
                      "</div>"
      $('#story_tab').append(segment_link)

    @show = ->
      html = "<div id='story-segment-1' class='container-fluid modal fade'>"+"
                <div class='modal-dialog modal-lg' role='document'>"+"
                  <div class='modal-content'>"+"
                    <div class='modal-header'>"+"
                      <button id='story-close' type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>"+"
                      <h4 class='modal-title' id='myModalLabel'>" + @num + " - " + @name + "</h4>"+"
                    </div>"+"
                    <div class='modal-body'>"+"
                      <span id='story-arrow-left' class='glyphicon glyphicon-chevron-left'></span>"+"
                      <img class='story-image' src=" + @images[progress] + " class='row' />"+"
                      <span id='story-arrow-right' class='glyphicon glyphicon-chevron-right'></span>"+"
                    </div>"+"
                    <div class='modal-footer'>"+"
                    </div>"+"
                  </div>"+"
                </div>"+"
              </div>"
      $('#story_tab').append(html)
      $('#story-segment-' + @num).modal({"show": "true", backdrop: "static"})
      #Advance to previous/next image when clicked
      $('#story-arrow-left').click( =>
          progress -= 1
          $('.story-image').attr('src', @images[progress])
      )
      $('#story-arrow-right').click( =>
          if progress == @images.length - 1
            $('#story-close').click()
            @completed = true
          if progress < @images.length - 1
            progress += 1
            $('.story-image').attr('src', @images[progress])
      )
      $('#story-close').click( =>
        if progress == @images.length - 1
          @completed = true
      )

segment_links = (num) ->
  name = "segment" + num
  setTimeout("#{name}.show()",0)

segment1 = new StorySegment(1, "Let's get out of here...", ["img/tube1.jpg","img/tube2.jpg","img/tube3.jpg","img/tube4.jpg","img/tube5.jpg","img/tube6.jpg","img/tube7.jpg","img/tube8.jpg","img/tube9.jpg"])
 */

Currency = (function() {
  function Currency(name, amount1) {
    this.name = name;
    this.amount = amount1;
    this.spend = function(amount) {
      return this.amount -= amount;
    };
    this.gain = function(amount) {
      return this.amount += amount;
    };
  }

  return Currency;

})();

gold = new Currency("Gold", 0);

xp = new Currency("Experience", 0);

crystals = new Currency("Crystals", 0);

skill_points = new Currency("Skill Points", 0);

TeamMember = (function() {
  function TeamMember(name, main_stat) {
    this.name = name;
    this.str = 1;
    this.fort = 1;
    this.dex = 1;
    this.speed = 1;
    this.energy = 20;
    this.hp = function() {
      return this.fort * 10;
    };
    this.crit_dmg = function() {
      return 1 + ((this.dex + this.str) / 100);
    };
    this.base_dmg = function() {
      return this.str * 1.5;
    };
    this.armor = function() {
      return this.fort * 0.5;
    };
    this.crit_chance = function() {
      return this.dex / 100;
    };
    this.dodge = function() {
      return 1 + ((this.speed + this.dex) / 100);
    };
    this.lvl = function() {
      return 0;
    };
  }

  return TeamMember;

})();

navigation = function() {
  $('#story_menu_link').click(function() {
    $('#story_tab').show();
    $('#armor_tab').hide();
    $('#team_tab').hide();
    $('#missions_tab').hide();
    return $('#acheivements_tab').hide();
  });
  $('#armor_menu_link').click(function() {
    $('#story_tab').hide();
    $('#armor_tab').show();
    $('#team_tab').hide();
    $('#missions_tab').hide();
    return $('#acheivements_tab').hide();
  });
  $('#team_menu_link').click(function() {
    $('#story_tab').hide();
    $('#armor_tab').hide();
    $('#team_tab').show();
    $('#missions_tab').hide();
    return $('#acheivements_tab').hide();
  });
  $('#missions_menu_link').click(function() {
    $('#story_tab').hide();
    $('#armor_tab').hide();
    $('#team_tab').hide();
    $('#missions_tab').show();
    return $('#acheivements_tab').hide();
  });
  return $('#acheivements_menu_link').click(function() {
    $('#story_tab').hide();
    $('#armor_tab').hide();
    $('#team_tab').hide();
    $('#missions_tab').hide();
    return $('#acheivements_tab').show();
  });
};

first_launch = function() {
  return false;
};

first_run = function() {
  if (first_launch()) {
    segment1.unlock();
    return segment1.show();
  }
};

xp_tick = function() {
  xp.gain(1);
  return $('#xp_label').text(xp.amount + " xp");
};

$(document).ready(function() {
  navigation();
  first_run();
  return window.setInterval(function() {
    return xp_tick();
  }, 1000);
});


/*
StorySegment
TeamMember
Mission
Achievement
Currency
960x430 is standard size for main_image
960x430 = 900 x
 */
